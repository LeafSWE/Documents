\documentclass[../Funzionalita.tex]{subfiles}

\begin{document}
\label{sec:LocalizzazioneUtente}
\subsection{Localizzazione utente}
		
		\subsubsection{Panoramica}
			L'applicazione offre la funzionalità di localizzare l'utente all'interno di un edifico in cui risiedono i beacon riconosciuti dall'applicazione e di mostrare semplici informazioni sull'edifico.
			
			La localizzazione utente avviene seguendo le seguenti fasi:
			\begin{enumerate}
				\item l'utente avvia l'applicazione;
				\item l'applicazione avvia il monitoring per poter rilevare i beacon circostanti;
				\item l'applicazione reperisce l'identificativo major;
				\item l'applicazione si accerta che i beacon rilevati siano pertinenti all'applicazione attraverso un confronto tra major rilevato e major dei beacon nel database locale;
				\item se il beacon è riconosciuto ed esiste un match nel database locale:
					\begin{itemize}
						\item viene costruito il grafico dal database;
						\item vengono mostrate all'utente semplici informazioni sull'edificio;
					\end{itemize}
				\item se il beacon è riconosciuto e non esiste un match nel database locale:
					\begin{itemize}
						\item viene segnalato all'utente che la mappa dell'edificio non è scaricata nel device;
						\item l'utente se lo desidera è reindirizzato alla gestione delle mappe;
					\end{itemize}
				\item se il beacon non è riconosciuto:
					\begin{itemize}
						\item viene ignorato.
					\end{itemize}
			\end{enumerate}
			
		\newpage
		\subsection{Interfaccia grafica}
		
			\paragraph*{Componenti interne}
			\begin{description}
				\item[Package:] ???
				\item[Classi:] ???
			\end{description}
			
			\paragraph*{Componenti esterne}
			\begin{description}
				\item[Classi SDK:] 
			\end{description}
			
			??? Immagine dell'applicazione nella home vuota
			
			??? Immagine dell'applicazione nella home con le informazioni dell'edificio
			
			??? Immagini dell'applicazione nella home vuota con messaggio di avviso mappa non disponibile nel device
			
		\subsection{Presenter}
		
			??? Activity
			
			\begin{itemize}[label={--}]
				\item \verb|onCreate()|
				\item \verb|onDestroy()|
				\item ...
			\end{itemize}
			
		\subsubsection{Rilevamento beacon}
			
			\paragraph*{Componenti interne}
			\begin{itemize}
			
				\item Package:
				\begin{itemize}
					\item \model;
					\item \beacon;
					\item \dataaccess;
				\end{itemize}
				
				\item Classi:
				\begin{itemize}
					\item \BeaconManagerAdapter, \MyBeacon;
				\end{itemize}
												
			\end{itemize}
			
			\paragraph*{Componenti esterne}
			\begin{itemize}
			
				\item Classi JDK:
				\begin{itemize}
					\item[] \PriorityQueue;
				\end{itemize}
				
				\item Classi SDK:
				\begin{itemize}
					\item[] \Intent, \LocalBroadcastManager, \Service, \Binder, \LocalBroadcastManager;
				\end{itemize}
				
				\item Classi AltBeacon:
				\begin{itemize}
					\item[] \BeaconManager, \BootstrapNotifier, \BeaconConsumer, \RangeNotifier, \Region, \BeaconParser, \DistanceCalculator, \Beacon.
				\end{itemize}
				
				
				
			\end{itemize}
			
			\paragraph*{Componenti esterne}
			\begin{description}
				\item[Classi JDK:] \verb|PriorityQueue|;
				\item[Classi SDK:] \verb|Intent|, \verb|LocalBroadcastManager|, \verb|Service|, \verb|Binder|, \\ \verb|LocalBroadcastManager|;
				\item[Classi AltBeacon:] \verb|BeaconManager|, \verb|BootstrapNotifier|, \verb|BeaconConsumer|, \verb|RangeNotifier|, \verb|Region|, \verb|BeaconParser|,  \verb|DistanceCalculator|, \verb|Beacon|.
			\end{description}
			
			%Attraverso la classe BeaconManagerImp viene avviato il Service BeaconManagerAdapter il quale inizia il monitoring costante in background.
			%Se la region dei beacon rilevati è coincidente a quella dell'applicativo inizia il ranging.
			
			La classe \BeaconManagerAdapter\ si occupa di effettuare il ranging e il monitoring dei beacon circostanti. 
			Essa estende un Service (vedi appendice \ref{sec:FondamentiDiAndroid})per cui presenta un ciclo di vita così gestito:
			
			
			
			
			
			
			I principali metodi sono:
			\begin{itemize}
				\item 
				\item 
				\item 
			\end{itemize}						
			
			Classe AltBeacon:
				???
			Classe AltBeacon:
				???
			
		\subsection{Costruzione grafo}
		
		
		%\subsection{Reindirizzamento alla gestione mappe}
		
\end{document}